{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\raymi\\\\Desktop\\\\MHIRJ-chart\\\\MHIRJ\\\\src\\\\Components\\\\MdcMessages\\\\Reports\\\\Report.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport DailyReport from './DailyReport/DailyReport';\nimport FlagReport from './FlagReport/FlagReport';\nimport HistoryReport from './HistoryReport/HistoryReport';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles'; //Buttons Imports\n\nimport Button from '@material-ui/core/Button'; //Axios Imports \n\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: '50px auto',\n    width: '95vw'\n  },\n  flagFilters: {\n    margin: '20px',\n    maxWidth: '100%',\n    display: 'flex'\n  },\n  flagH3: {\n    marginLeft: '24px'\n  },\n  button: {\n    margin: '9px 30px',\n    backgroundColor: \"#C5D3E0\",\n    width: '600px',\n    height: '51px'\n  },\n  buttonFlag: {\n    margin: '0px 50px 15px 0px',\n    backgroundColor: \"#C5D3E0\",\n    width: '89%' // height: '51px',\n\n  }\n}));\n\nconst Report = props => {\n  _s();\n\n  const classes = useStyles();\n  const [report, setReport] = useState(props.reportConditions);\n  const [dailyReportData, setDailyReportData] = useState([]);\n  const [historyReportData, setHistoryReportData] = useState([]);\n  const [flagData, setFlagData] = useState('');\n  const [flagList, setFlagList] = useState(''); //const [ACSNList, setACSNList] = useState([]);\n  // const [eqList, setEqList] = useState([]);\n\n  const HandleMultipleRowSelectReport = flagList => {\n    console.log(flagList);\n    setFlagList(flagList);\n  };\n\n  const [dailyValue, setDailyValue] = useState(0);\n  const [histValue, setHistValue] = useState(0);\n  useEffect(() => {\n    setReport(props.reportConditions);\n    let flag = false;\n\n    for (var item in Object.entries(props.reportConditions)) {\n      if (Object.entries(props.reportConditions)[item][1] === \"\") {\n        flag = true;\n        break;\n      }\n    }\n\n    if (flag === false) {\n      localStorage.setItem(\"last\", JSON.stringify(props.reportConditions));\n\n      if (props.reportConditions.analysis === \"daily\") {\n        localStorage.setItem(\"daily\", JSON.stringify(props.reportConditions));\n      } else if (props.reportConditions.analysis === \"history\") {\n        localStorage.setItem(\"history\", JSON.stringify(props.reportConditions));\n      }\n    }\n  }, [props.reportConditions]);\n  useEffect(() => {\n    if (report.ata !== null && report.ata !== undefined && report.ata !== '') {\n      /* Using useEffect so that axios can run only on the first render \r\n      http://localhost:8000/\"/GenerateReport/{analysisType}/{occurences}/{legs}/{intermittent}/{consecutiveDays}/{ata}/{exclude_EqID}/{airline_operator}/{include_current_message}/{fromDate}/{toDate}\") \r\n      Example of Daily Path: http://localhost:8000/GenerateReport/daily/2/2/3/0/SKW/28/0/2020-11-14/2020-11-15 */\n      const {\n        analysis,\n        occurences,\n        legs,\n        intermittent\n      } = report;\n      let consecutiveDays;\n\n      if (report.analysis === \"daily\") {\n        consecutiveDays = 0;\n      } else {\n        consecutiveDays = report.days;\n      }\n\n      const operator = report.operator;\n      const ata = report.ata;\n      const eqid = report.eqID;\n      const messages = 0;\n      const fromDate = report.fromDate;\n      const toDate = report.toDate;\n\n      if (props.reportConditions.analysis === \"daily\") {\n        setDailyValue(1);\n      } else if (props.reportConditions.analysis === \"history\") {\n        setHistValue(1);\n      }\n    }\n  }, [report]);\n  const [flagConditions, setFlagConditions] = useState('');\n\n  const handleGenerateFlagReport = event => {\n    setFlagConditions({\n      analysis: props.reportConditions.analysis,\n      occurences: props.reportConditions.occurences,\n      legs: props.reportConditions.legs,\n      HistExEqID: props.reportConditions.eqID,\n      intermittent: props.reportConditions.intermittent,\n      days: props.reportConditions.days,\n      operator: props.reportConditions.operator,\n      HistAta: props.reportConditions.ata,\n      messages: props.reportConditions.messages,\n      fromDate: props.reportConditions.fromDate,\n      toDate: props.reportConditions.toDate,\n      flagList: flagList\n    });\n  };\n\n  useEffect(() => {\n    let flag = false;\n    Object.values(flagConditions).map(item => {\n      if (item === \"\") {\n        flag = true;\n      }\n    });\n\n    if (flag === false) {\n      /*\r\n      const path = 'http://localhost:8000/GenerateReport/{analysisType}/{occurences}/{legs}/{intermittent}/{consecutiveDays}/{ata}/\r\n      {exclude_EqID}/{airline_operator}/{include_current_message}/{fromDate}/{toDate}/{acsn,bcode}';\r\n      http://127.0.0.1:8000/GenerateReport/history/2/2/2/8/('32','22')/('B1-007553', 'B1-246748')/skw/1/2020-11-11/2020-11-12/('10214','B1-005815'), ('10214','B1-005831')\r\n      */\n      const flagPath = 'http://localhost:8000/GenerateReport/' + flagConditions.analysis + '/' + flagConditions.occurences + '/' + flagConditions.legs + '/' + flagConditions.intermittent + '/' + flagConditions.days + '/' + flagConditions.HistAta + '/' + flagConditions.HistExEqID + '/' + flagConditions.operator + '/' + flagConditions.messages + '/' + flagConditions.fromDate + '/' + flagConditions.toDate + '/' + flagConditions.flagList;\n\n      try {\n        axios.post(flagPath).then(function (res) {\n          var data = JSON.parse(res.data);\n          setFlagData(data);\n        });\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  }, [flagConditions]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: [historyReportData !== \"\" && historyReportData !== \"undefined\" && histValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 0,\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 10\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 2,\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              onClick: () => handleGenerateFlagReport(),\n              className: classes.buttonFlag,\n              children: \"Generate Flag Report\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            item: true,\n            xs: 12,\n            children: /*#__PURE__*/_jsxDEV(HistoryReport, {\n              data: historyReportData,\n              title: \"History Report\",\n              reportConditions: report,\n              HandleMultipleRowSelectReport: HandleMultipleRowSelectReport\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), dailyReportData !== \"\" && dailyReportData !== \"undefined\" && dailyValue === 1 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(DailyReport, {\n        data: dailyReportData,\n        title: \"Daily Report\",\n        reportConditions: report\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }, this)\n    }, void 0, false), flagData !== \"\" && flagData !== \"undefined\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(FlagReport, {\n        data: flagData,\n        flagReportConditions: flagConditions,\n        title: \"Flag Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Report, \"XZ8T27a7KgxdzbXH4uUWfrjKUAY=\", false, function () {\n  return [useStyles];\n});\n\n_c = Report;\nexport default Report;\n\nvar _c;\n\n$RefreshReg$(_c, \"Report\");","map":{"version":3,"sources":["C:/Users/raymi/Desktop/MHIRJ-chart/MHIRJ/src/Components/MdcMessages/Reports/Report.js"],"names":["React","useState","useEffect","DailyReport","FlagReport","HistoryReport","Grid","makeStyles","Button","axios","useStyles","theme","root","margin","width","flagFilters","maxWidth","display","flagH3","marginLeft","button","backgroundColor","height","buttonFlag","Report","props","classes","report","setReport","reportConditions","dailyReportData","setDailyReportData","historyReportData","setHistoryReportData","flagData","setFlagData","flagList","setFlagList","HandleMultipleRowSelectReport","console","log","dailyValue","setDailyValue","histValue","setHistValue","flag","item","Object","entries","localStorage","setItem","JSON","stringify","analysis","ata","undefined","occurences","legs","intermittent","consecutiveDays","days","operator","eqid","eqID","messages","fromDate","toDate","flagConditions","setFlagConditions","handleGenerateFlagReport","event","HistExEqID","HistAta","values","map","flagPath","post","then","res","data","parse","err","error"],"mappings":"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","sourcesContent":["import React, {useState,useEffect} from 'react';\r\nimport DailyReport from './DailyReport/DailyReport';\r\nimport FlagReport from './FlagReport/FlagReport';\r\nimport HistoryReport from './HistoryReport/HistoryReport';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n//Buttons Imports\r\nimport Button from '@material-ui/core/Button';\r\n//Axios Imports \r\nimport axios from 'axios';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    margin:'50px auto',\r\n    width:'95vw',\r\n  },\r\n  flagFilters: {\r\n    margin: '20px',\r\n    maxWidth: '100%',\r\n    display: 'flex',\r\n  },  \r\n  flagH3: {\r\n    marginLeft: '24px',\r\n  },\r\n  button:{\r\n    margin:'9px 30px',\r\n    backgroundColor:\"#C5D3E0\",\r\n    width: '600px',\r\n    height: '51px',\r\n  },\r\n  buttonFlag:{\r\n    margin:'0px 50px 15px 0px',\r\n    backgroundColor:\"#C5D3E0\",\r\n    width: '89%',\r\n    // height: '51px',\r\n  },\r\n}));\r\n\r\nconst Report = (props) => {\r\n  const classes = useStyles();\r\n  const [report, setReport] = useState(props.reportConditions);\r\n  const [dailyReportData, setDailyReportData] = useState([]);\r\n  const [historyReportData, setHistoryReportData] = useState([]);\r\n  const [flagData, setFlagData] = useState('');\r\n  const [flagList,setFlagList] = useState('');\r\n  //const [ACSNList, setACSNList] = useState([]);\r\n // const [eqList, setEqList] = useState([]);\r\n\r\n  const HandleMultipleRowSelectReport = (flagList) => {\r\n    console.log(flagList);\r\n    setFlagList(flagList);\r\n  }\r\n\r\n  const [dailyValue,setDailyValue] = useState(0);\r\n  const [histValue,setHistValue] = useState(0);\r\n\r\n  useEffect( () => {\r\n      setReport(props.reportConditions);\r\n      let flag = false;\r\n      for (var item in Object.entries(props.reportConditions)) {\r\n        if ( Object.entries(props.reportConditions)[item][1] === \"\") {\r\n          flag = true;\r\n          break;\r\n        }\r\n      }\r\n      \r\n    if (flag === false){\r\n      localStorage.setItem(\"last\",JSON.stringify(props.reportConditions)); \r\n      if(props.reportConditions.analysis === \"daily\"){\r\n        localStorage.setItem(\"daily\",JSON.stringify(props.reportConditions)); \r\n      }\r\n      else if(props.reportConditions.analysis === \"history\"){\r\n        localStorage.setItem(\"history\",JSON.stringify(props.reportConditions));\r\n      } \r\n    } \r\n    }, [props.reportConditions]);\r\n\r\n  useEffect( () => {\r\n    if (report.ata !== null && report.ata !== undefined &&  report.ata !== ''){\r\n      /* Using useEffect so that axios can run only on the first render \r\n      http://localhost:8000/\"/GenerateReport/{analysisType}/{occurences}/{legs}/{intermittent}/{consecutiveDays}/{ata}/{exclude_EqID}/{airline_operator}/{include_current_message}/{fromDate}/{toDate}\") \r\n      Example of Daily Path: http://localhost:8000/GenerateReport/daily/2/2/3/0/SKW/28/0/2020-11-14/2020-11-15 */\r\n\r\n      const {analysis, occurences, legs, intermittent} = report;\r\n      let consecutiveDays;\r\n      if (report.analysis === \"daily\") {\r\n        consecutiveDays = 0;\r\n      }\r\n      else {\r\n        consecutiveDays = report.days;\r\n      }\r\n      const operator = report.operator;          \r\n      const ata = report.ata;\r\n      const eqid = report.eqID;\r\n      const messages = 0; \r\n      const fromDate = report.fromDate;\r\n      const toDate = report.toDate;\r\n\r\n      if (props.reportConditions.analysis === \"daily\"){\r\n        setDailyValue(1);\r\n      }\r\n      else if (props.reportConditions.analysis === \"history\"){\r\n        setHistValue(1);\r\n      }\r\n    }\r\n  }, [report]);\r\n\r\n  const [flagConditions,setFlagConditions] = useState('');\r\n\r\n  const handleGenerateFlagReport = (event) => {\r\n  setFlagConditions(\r\n    {         \r\n      analysis: props.reportConditions.analysis,\r\n      occurences: props.reportConditions.occurences,\r\n      legs: props.reportConditions.legs,\r\n      HistExEqID: props.reportConditions.eqID,\r\n      intermittent: props.reportConditions.intermittent,\r\n      days: props.reportConditions.days,\r\n      operator: props.reportConditions.operator,\r\n      HistAta: props.reportConditions.ata,\r\n      messages: props.reportConditions.messages,\r\n      fromDate: props.reportConditions.fromDate,\r\n      toDate: props.reportConditions.toDate,\r\n      flagList: flagList,\r\n    },\r\n  );\r\n  }\r\n  useEffect(() => {\r\n    let flag = false;\r\n    Object.values(flagConditions).map(item => {\r\n      if (item === \"\"){\r\n        flag = true;\r\n      }\r\n    });\r\n\r\n    if (flag === false) {  \r\n      /*\r\n      const path = 'http://localhost:8000/GenerateReport/{analysisType}/{occurences}/{legs}/{intermittent}/{consecutiveDays}/{ata}/\r\n      {exclude_EqID}/{airline_operator}/{include_current_message}/{fromDate}/{toDate}/{acsn,bcode}';\r\n      http://127.0.0.1:8000/GenerateReport/history/2/2/2/8/('32','22')/('B1-007553', 'B1-246748')/skw/1/2020-11-11/2020-11-12/('10214','B1-005815'), ('10214','B1-005831')\r\n      */\r\n      \r\n      const flagPath = 'http://localhost:8000/GenerateReport/' + flagConditions.analysis + '/' + flagConditions.occurences + '/' + \r\n      flagConditions.legs + '/' + flagConditions.intermittent + '/' + flagConditions.days + '/' + flagConditions.HistAta + '/' + \r\n      flagConditions.HistExEqID + '/'+ flagConditions.operator + '/' + flagConditions.messages + '/' + flagConditions.fromDate + '/' + \r\n      flagConditions.toDate + '/' + flagConditions.flagList;\r\n\r\n      try{\r\n        axios.post(flagPath).then(function (res) {\r\n          var data = JSON.parse(res.data);\r\n          setFlagData(data);\r\n        });\r\n      } catch (err) {\r\n        console.error(err);\r\n      }\r\n    }\r\n  },[flagConditions]);\r\n\r\n  return(\r\n    <div className={classes.root}>\r\n      {historyReportData !== \"\" && historyReportData !== \"undefined\" && histValue === 1 &&\r\n        <>\r\n          <div>\r\n            <Grid container spacing={0}>\r\n              <Grid item xs={10}></Grid>\r\n              <Grid item xs={2}>\r\n                <Button \r\n                  variant=\"contained\" \r\n                  onClick = {()=>handleGenerateFlagReport()}\r\n                  className={classes.buttonFlag}>\r\n                    Generate Flag Report\r\n                </Button>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <HistoryReport data = {historyReportData}  title = \"History Report\" reportConditions = {report} HandleMultipleRowSelectReport = {HandleMultipleRowSelectReport}/>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </>\r\n      }\r\n      {dailyReportData !== \"\" && dailyReportData !== \"undefined\" && dailyValue === 1 &&\r\n        <>\r\n          <DailyReport data = {dailyReportData} title = \"Daily Report\" reportConditions = {report}/>\r\n        </>\r\n      }\r\n      {flagData !== \"\" && flagData !== \"undefined\" && \r\n        <>\r\n          <FlagReport data = {flagData} flagReportConditions = {flagConditions} title = \"Flag Report\"/>\r\n        </>\r\n      }\r\n    </div>  \r\n  );    \r\n};\r\n\r\nexport default Report;"]},"metadata":{},"sourceType":"module"}